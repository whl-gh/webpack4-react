# webpack4-react
webpackæ„å»ºreact+antd-mobileå¼€å‘ç¯å¢ƒ
[ä½œè€…ä¸»é¡µ](https://github.com/whl-gh "ğŸ˜ ä¸¤çœ¼æ”¾å…‰")

## å®ç°åŠŸèƒ½
1. å®ç°åŸºäºkoa2çš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Œç”¨åˆ°é™æ€æœåŠ¡å™¨ã€‚
2. åŸºäºwebpack4.39.2ç‰ˆæœ¬ï¼Œå®ç°ä»£ç åˆ†å‰²ã€‚
3. å®ç°antd-mobileæŒ‰éœ€åŠ è½½ã€‚
4. å®ç°mdæ–‡æ¡£è½¬html,æœ¬åœ°æœåŠ¡å™¨åœ¨çº¿é¢„è§ˆã€‚

## é¡¹ç›®è¿è¡Œ
### è¿›å…¥é¡¹ç›®è·Ÿç›®å½•ä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤,å®‰è£…ä¾èµ–åŒ…ï¼š
```
yarn install
```
### å†…ç½®å‘½ä»¤æœ‰ä¸‰ä¸ªåˆ†åˆ«æ˜¯ devã€testã€pro
1. dev æ‰“å¼€å‘ç¯å¢ƒåŒ…ï¼Œä¸ä¼šå†æœ¬åœ°ç”Ÿäº§æ–‡ä»¶ï¼Œæ‰“å‡ºçš„æ–‡ä»¶æ˜¯åœ¨å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿä¼šå¼€å¯ä¸€ä¸ªæœ¬åœ°æœåŠ¡ï¼Œç«¯å£å’Œåœ°å€åœ¨ package.json çš„ devServer èŠ‚ç‚¹ä¸Šé…ç½®
```
yarn dev
````
2. test æ˜¯æ‰“æµ‹è¯•ç¯å¢ƒåŒ…
```
yarn test
````
3. pro æ˜¯æ‰“ç”Ÿäº§ç¯å¢ƒåŒ…
```
yarn pro
````

## ç›®å½•ä»‹ç»
- build ç›®å½•å­˜æ”¾ webpacké…ç½®å’Œæœ¬åœ°æœåŠ¡å™¨ä»£ç ï¼Œæ—¶æœåŠ¡å™¨è·¯ç”±ä¸­çš„ä»£ç å•ç‹¬å†™å‡ºæ¥å½¢æˆä¸€ä¸ªrouter.jsæ–‡ä»¶ï¼Œæ–¹ä¾¿æ‰©å±•è·¯ç”±ï¼Œutils.jsæ–‡ä»¶æ˜¯ä¸€äº›è·Ÿæ„å»ºweboackå’ŒdevServerçš„å…¬å…±ä»£ç ã€‚
- src è¿™ä¸ªæ˜¯é¡¹ç›®å¼€å‘ç›®å½•
- doc æ˜¯é¡¹ç›®æ–‡æ¡£ç›®å½•ï¼Œé‡Œé¢ç¼–å†™è‡ªå·±çš„mdæ–‡æ¡£ï¼Œæ¯”å¦‚æ¥å£æ–‡æ¡£(interface.md)å’Œé¡¹ç›®è‡ªè¿°æ–‡æ¡£(readme.md),åœ¨è¿è¡Œ yanr dev ä¹‹åå¯ä»¥é€šè¿‡æœ¬åœ°åœ°å€ http://127.0.0.1:6689/md/interface è®¿é—®æ–‡æ¡£ï¼Œæœ€åä¸€ä¸ªæ˜¯æ–‡æ¡£åç§°ï¼Œä¸åŒ…å«æ‰©å±•å.mdï¼ŒdevServerä¼šè‡ªåŠ¨æ ¹æ®åç§°æ‰¾åˆ°docç›®å½•ä¸‹çš„æ–‡æ¡£ç„¶åè½¬æˆhtmlè¾“å‡ºç»™å‰å°ã€‚ä¸ºäº†å¥½çœ‹å¼•å…¥äº†ç¬¬ä¸‰æ–¹æ ·å¼ã€‚
##### package.json æ–‡ä»¶ä¸­æ·»åŠ äº†å‡ ä¸ªèŠ‚ç‚¹
èŠ‚ç‚¹åç§°|ä½œç”¨
---|---:
devServer|å¼€å‘æœåŠ¡å™¨å‚æ•°é…ç½®èŠ‚ç‚¹
project|é¡¹ç›®é…ç½®èŠ‚ç‚¹
devEnvConfig|å¼€å‘ç¯å¢ƒé…ç½®
testEnvConfig|æµ‹è¯•ç¯å¢ƒé…ç½®
proEnvConfig|ç”Ÿäº§ç¯å¢ƒé…ç½®


## webpack é…ç½®æ€»ç»“
1. webpack é…ç½®ä¸­çš„ publicpath ä¸»è¦æ˜¯åœ¨ç»™è‡ªåŠ¨æ³¨å…¥çš„jsæˆ–è€…imgç­‰æ·»åŠ æ ¹åœ°å€ï¼Œä¼šæŠŠæˆ‘ä»¬çš„è·¯å¾„æ‹¼æ¥åˆ°publicpathåé¢ã€‚outputå‡ºå£ä¸­çš„publicpathæ˜¯å¯ä»¥è¢«loaderæˆ–pluginsä¸­çš„æ’ä»¶çš„ publicpath è¦†ç›–æ‰ã€‚
2. åœ¨é¡¹ç›®ä¸­å¼•å…¥é™æ€èµ„æºï¼Œè¯·ä½¿ç”¨requireçš„æ–¹å¼å¯¼å…¥ï¼Œè¿™æ ·å¯ä»¥é¿å…è·¯å¾„ä¸Šçš„ä¸€äº›å‘ï¼ŒåŒæ—¶å¯ä»¥åˆ©ç”¨ contenthash è¿›è¡Œç¼“å­˜æ§åˆ¶å¤„ç†ã€‚
3. åœ¨é…ç½®æŒ‰éœ€å¤¹æ‚çš„æ—¶å€™ï¼Œä¸è¦åœ¨ entryä¸­å†™å¦‚ä¸‹ä»£ç ,å¦åˆ™ä¸ä¼šè¿›è¡ŒæŒ‰éœ€åŠ è½½ï¼š
```
entry: {
    vender: ['@babel/polyfill', 'react', 'react-dom'],
    antdmobile: ['antd-mobile'],
    main: path.resolve(__dirname, "../src/main.js"),
  },
```
æœ¬æ„æ˜¯æƒ³æŠŠ antd-mobile æ‰“åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯è¿™ä¹ˆå†™ï¼Œä¼šä½¿å¾— antd-mobile å…¨éƒ¨å†™å…¥åˆ°æ‰“åŒ…åçš„æ–‡ä»¶ä¸­ï¼Œåé¢å†ä½¿ç”¨ babel-plugin-import æ’ä»¶å¯¹ä»–è¿›è¡ŒæŒ‰éœ€æ‰“åŒ…çš„æ—¶å€™å¹¶ä¸ä¼šå¦‚æ„å¤„ç†ï¼Œæ‰“å‡ºæ¥çš„åŒ…å¾ˆå¤§ã€‚
åˆ æ‰ antdmobile: ['antd-mobile'] è¿™å¥å°±å¥½äº†ï¼Œæ”¹æˆä¸‹é¢
```
entry: {
    vender: ['@babel/polyfill', 'react', 'react-dom'],
    main: path.resolve(__dirname, "../src/main.js"),
  },
```
è¿™ä¸ªåœ°æ–¹ä¸çŸ¥é“ç†è§£çš„æ˜¯å¦æ­£ç¡®ï¼Œè¿˜æœ›å„ä½æŒ‡æ­£ï¼
